<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Login ‚Äì mediabuzz365</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Poppins',sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#f6d7ff,#d9e6ff);
}

.login-card{
  width:420px;
  background:rgba(255,255,255,0.95);
  padding:35px;
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,0.12);
}

/* SHAKE */
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-6px)}
  100%{transform:translateX(0)}
}
.shake{
  animation:shake .4s;
  border:2px solid #e31e24;
}

.logo{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  margin-bottom:20px;
}

.logo img{
  width:42px;
}

h2{
  text-align:center;
  margin-bottom:25px;
}

.input-box{
  position:relative;
  margin-bottom:15px;
}

input{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:15px;
}

input:focus{
  border-color:#e31e24;
}

.eye{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
}

button{
  width:100%;
  margin-top:15px;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#e31e24;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

button.loading{
  background:#aaa;
  pointer-events:none;
}

.error{
  margin-top:12px;
  text-align:center;
  color:#e31e24;
}

/* REGISTER LINK */
.register-link{
  text-align:center;
  margin-top:15px;
  font-size:14px;
}

.register-link a{
  color:#2563eb;
  text-decoration:none;
  font-weight:500;
}
.register-link a:hover{
  text-decoration:underline;
}
</style>
</head>

<body>

<div class="login-card" id="card">

  <div class="logo">
    <img src="/images/mediabuzz365.png">
    <span>Admin Login</span>
  </div>

  <h2>Welcome Back</h2>

  <form onsubmit="event.preventDefault(); login();">

    <!-- EMAIL -->
    <div class="input-box">
      <input id="email" placeholder="Admin Email" required>
    </div>

    <!-- PASSWORD -->
    <div class="input-box">
      <input id="password" type="password" placeholder="Password" required>
      <span class="eye" onclick="togglePassword()">üëÅÔ∏è</span>
    </div>

    <button id="loginBtn">
      <span id="btnText">Login</span>
    </button>

    <p id="msg" class="error"></p>
  </form>

  <!-- REGISTER LINK -->
  <div class="register-link">
    New District Incharge?
    <a href="/admin/register.html">Register here</a>
  </div>

</div>

<script>
const API = location.hostname.includes("localhost")
 ? "http://localhost:3000"
 : "https://mediabuzz365.in";

function togglePassword(){
 const pass=document.getElementById("password");
 pass.type = pass.type==="password"?"text":"password";
}

function login(){

 const card=document.getElementById("card");
 const btn=document.getElementById("loginBtn");
 const btnText=document.getElementById("btnText");
 const msg=document.getElementById("msg");

 msg.innerText="";
 btn.classList.add("loading");
 btnText.innerText="Logging in...";

 fetch(API+"/api/auth/login",{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({
   email: email.value,
   password: password.value
  })
 })
 .then(r=>r.json())
 .then(d=>{

  if(!d.token){
   msg.innerText=d.msg || "Login failed";
   return;
  }

  if(d.user.role!=="admin"){
   msg.innerText="Access denied";
   return;
  }

  localStorage.setItem("token",d.token);
  location.href="/admin/index.html";
 })
 .catch(()=>{
  msg.innerText="‚ùå Wrong credentials";
  card.classList.add("shake");
  setTimeout(()=>card.classList.remove("shake"),400);
 })
 .finally(()=>{
  btn.classList.remove("loading");
  btnText.innerText="Login";
 });
}
</script>

</body>
</html>
