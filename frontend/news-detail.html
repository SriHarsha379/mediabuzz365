<!DOCTYPE html>
<html lang="te">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>News Details - MediaBuzz365</title>
<link rel="stylesheet" href="common.css">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{font-family:'Noto Sans Telugu',sans-serif;background:#f5f5f5}

/* CONTAINER */
.container{
 max-width:900px;
 margin:30px auto;
 padding:0 16px;
}

.news-img{
 width:100%;
 height:420px;
 object-fit:cover;
 border-radius:16px;
 box-shadow:0 12px 30px rgba(0,0,0,.2);
 display:block;
 margin:0 auto 20px;
 cursor:zoom-in;
}

.news-title{font-size:26px;margin:16px 0}
.meta{color:#64748b;font-size:13px;margin-bottom:14px}
.desc{font-size:16px;line-height:1.8}

/* ZOOM */
.img-overlay{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.9);
 display:none;
 align-items:center;
 justify-content:center;
 z-index:9999;
 cursor:zoom-out;
}
.img-overlay img{
 max-width:90%;
 max-height:90%;
 border-radius:12px;
}
</style>
</head>

<body>

<div class="container" id="newsBox">
  <!-- IMAGES LOAD HERE -->
  <h1 id="title" class="news-title"></h1>
  <div class="meta" id="meta"></div>
  <p id="desc" class="desc"></p>
</div>

<!-- ZOOM -->
<div id="imgOverlay" class="img-overlay">
 <img id="zoomImg">
</div>

<script>
const API =
 location.hostname==="localhost"||
 location.hostname==="127.0.0.1"
 ? "http://localhost:3000"
 : "https://mediabuzz365.in";

const id=new URLSearchParams(location.search).get("id");

fetch(`${API}/api/news/single/${id}`)
.then(r=>r.json())
.then(n=>{

 // TITLE
 title.innerText=n.title;
 desc.innerText=n.description||"";
 meta.innerText=
  `ðŸ“ ${n.city} | ðŸ•’ ${
   new Date(n.date)
   .toLocaleString("te-IN")
  }`;

 // ðŸ”¥ MULTIPLE IMAGES
 let imgHTML="";

 if(n.images && n.images.length){
  n.images.forEach(img=>{
   imgHTML+=`
    <img src="${API}${img}"
     class="news-img"
     onclick="zoom('${API}${img}')">
   `;
  });
 }else{
  imgHTML=`<img src="/images/no-image.png"
   class="news-img">`;
 }

 newsBox.insertAdjacentHTML(
  "afterbegin",imgHTML
 );
});

/* ZOOM */
const overlay=
 document.getElementById("imgOverlay");
const zoomImg=
 document.getElementById("zoomImg");

function zoom(src){
 zoomImg.src=src;
 overlay.style.display="flex";
}
overlay.onclick=()=>{
 overlay.style.display="none";
};
</script>

</body>
</html>
